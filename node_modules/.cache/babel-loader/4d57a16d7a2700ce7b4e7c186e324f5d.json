{"ast":null,"code":"// 纯函数\n\n/**\r\n * \r\n * @param {*} preState 之前的状态\r\n * @param {*} action 动作对象\r\n */\nconst initState = {\n  songList: [],\n  curIdx: 0,\n  song: null,\n  lyric: [],\n  video: null,\n  playerPageOpen: false,\n  user: {\n    loginState: false,\n    user: null,\n    detail: null,\n    playlist: []\n  },\n  playlist: {\n    songs: []\n  },\n  home: {\n    banners: [],\n    dailyRecommendList: []\n  },\n  curTime: 0\n}; // preState == undefined 初始化\n\nexport default function searchReducer() {\n  let preState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  console.log(preState, action);\n  const {\n    type,\n    data\n  } = action;\n\n  switch (type) {\n    case 'updateData':\n      return Object.assign({}, preState, {\n        [data.type]: data.data[data.type]\n      });\n\n    case 'banner':\n      return Object.assign({}, preState, {\n        home: Object.assign({}, preState.home, {\n          banners: data\n        })\n      });\n\n    case 'dailyRecommendList':\n      return Object.assign({}, preState, {\n        home: Object.assign({}, preState.home, {\n          dailyRecommendList: data\n        })\n      });\n\n    case 'addSong':\n      const {\n        songList,\n        curIdx\n      } = preState;\n      console.log('addSong', songList, data); // 这两句要分开写！！\n\n      let newSongList = Array.from(songList);\n      console.log('#!', data.id);\n      newSongList.filter(l => l.id != data.id);\n      newSongList.splice(+curIdx + 1, 0, data.song);\n      console.log('#', newSongList);\n      return Object.assign({}, preState, {\n        songList: newSongList,\n        curIdx: +curIdx + 1,\n        song: data.song,\n        lyric: data.lyric\n      });\n\n    case 'replaceList':\n      return Object.assign({}, preState, {\n        songList: data.songs,\n        curIdx: data.id,\n        song: data.songs[data.id]\n      });\n\n    case 'watchMV':\n      return Object.assign({}, preState, {\n        video: data.video,\n        duration: data.duration\n      });\n\n    case 'login':\n      return Object.assign({}, preState, {\n        user: {\n          loginState: data.loginState,\n          user: data.user,\n          detail: data.detail,\n          playlist: data.playlist\n        },\n        likedList: data.likedList\n      });\n\n    case 'loginState':\n      return Object.assign({}, preState, {\n        isLogin: data\n      });\n\n    case 'getPlayListAction':\n      return Object.assign({}, preState, {\n        playlist: Object.assign({}, preState.playlist, {\n          name: data.name,\n          coverImgUrl: data.coverImgUrl,\n          tags: data.tags,\n          creator: data.creator\n        })\n      });\n\n    case 'getPlayListSongs':\n      return Object.assign({}, preState, {\n        playlist: Object.assign({}, preState.playlist, {\n          songs: data\n        })\n      });\n\n    case 'getSinger':\n      ;\n      break;\n\n    case 'getAlbums':\n      ;\n      break;\n\n    case 'shift':\n      return Object.assign({}, preState, {\n        curIdx: data.idx,\n        song: preState.songList[data.idx],\n        lyric: data.lyric\n      });\n\n    case 'togglePlayerPage':\n      return Object.assign({}, preState, {\n        playerPageOpen: !preState.playerPageOpen\n      });\n\n    case 'lyric':\n      return Object.assign({}, preState, {\n        lyric: data\n      });\n\n    case 'updateCurTime':\n      console.log('timer', data);\n      return Object.assign({}, preState, {\n        curTime: data\n      });\n\n    default:\n      return preState;\n  }\n}","map":{"version":3,"sources":["E:/js/react/music-app/React-musicApp/src/Redux/searchReducer.js"],"names":["initState","songList","curIdx","song","lyric","video","playerPageOpen","user","loginState","detail","playlist","songs","home","banners","dailyRecommendList","curTime","searchReducer","preState","action","console","log","type","data","Object","assign","newSongList","Array","from","id","filter","l","splice","duration","likedList","isLogin","name","coverImgUrl","tags","creator","idx"],"mappings":"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","sourcesContent":["// 纯函数\r\n\r\n/**\r\n * \r\n * @param {*} preState 之前的状态\r\n * @param {*} action 动作对象\r\n */\r\nconst initState = {\r\n  songList: [],\r\n  curIdx: 0,\r\n  song: null,\r\n  lyric: [],\r\n  video: null,\r\n  playerPageOpen: false,\r\n  user: {\r\n    loginState: false,\r\n    user: null,\r\n    detail: null,\r\n    playlist: []\r\n  },\r\n  playlist: {\r\n    songs: []\r\n  },\r\n  home: {\r\n    banners: [],\r\n    dailyRecommendList: []\r\n  },\r\n  curTime: 0\r\n};\r\n// preState == undefined 初始化\r\nexport default function searchReducer(preState = initState, action) {\r\n  console.log(preState, action)\r\n  const { type, data } = action;\r\n  switch (type) {\r\n    case 'updateData':\r\n      return Object.assign({}, preState,\r\n        {\r\n          [data.type]: data.data[data.type],\r\n        })\r\n    case 'banner':\r\n      return Object.assign({}, preState, {\r\n        home: Object.assign({}, preState.home, {\r\n          banners: data\r\n        })\r\n      })\r\n    case 'dailyRecommendList':\r\n      return Object.assign({}, preState, {\r\n        home: Object.assign({}, preState.home, {\r\n          dailyRecommendList: data\r\n        })\r\n      })\r\n    case 'addSong':\r\n      const { songList, curIdx } = preState;\r\n      console.log('addSong', songList, data);\r\n      // 这两句要分开写！！\r\n      let newSongList = Array.from(songList)\r\n      console.log('#!', data.id)\r\n      newSongList.filter(l => l.id != data.id)\r\n      newSongList.splice(+curIdx+1, 0, data.song);\r\n\r\n      console.log('#', newSongList)\r\n      return Object.assign({}, preState,\r\n        {\r\n          songList: newSongList,\r\n          curIdx: +curIdx + 1,\r\n          song: data.song,\r\n          lyric: data.lyric\r\n        });\r\n    case 'replaceList': return Object.assign({}, preState,\r\n      {\r\n        songList: data.songs,\r\n        curIdx: data.id,\r\n        song: data.songs[data.id]\r\n      })\r\n    case 'watchMV': return Object.assign({}, preState, {\r\n      video: data.video,\r\n      duration: data.duration\r\n    });\r\n    case 'login': return Object.assign({}, preState, {\r\n      user: {\r\n        loginState: data.loginState,\r\n        user: data.user,\r\n        detail: data.detail,\r\n        playlist: data.playlist\r\n      },\r\n      likedList: data.likedList\r\n    });\r\n    case 'loginState': return Object.assign({}, preState, {\r\n      isLogin: data,\r\n    });\r\n    case 'getPlayListAction': return Object.assign({}, preState, {\r\n      playlist: Object.assign({}, preState.playlist, {\r\n        name: data.name,\r\n        coverImgUrl: data.coverImgUrl,\r\n        tags: data.tags,\r\n        creator: data.creator,\r\n      }),\r\n    })\r\n    case 'getPlayListSongs': return Object.assign({}, preState, {\r\n      playlist: Object.assign({}, preState.playlist, {\r\n        songs: data,\r\n      })\r\n    });\r\n    case 'getSinger': ; break;\r\n    case 'getAlbums': ; break;\r\n    case 'shift': return Object.assign({}, preState, {\r\n      curIdx: data.idx,\r\n      song: preState.songList[data.idx],\r\n      lyric:data.lyric\r\n    });\r\n    case 'togglePlayerPage': return Object.assign({}, preState, {\r\n      playerPageOpen: !preState.playerPageOpen,\r\n    });\r\n    case 'lyric': return Object.assign({}, preState, {\r\n      lyric: data\r\n    });\r\n    case 'updateCurTime':\r\n      console.log('timer', data);\r\n      return Object.assign({}, preState, {\r\n        curTime: data\r\n      });\r\n    default:\r\n      return preState;\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}