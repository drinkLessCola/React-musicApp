{"ast":null,"code":"import _classCallCheck from\"E:/js/react/music-app/React-musicApp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"E:/js/react/music-app/React-musicApp/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"E:/js/react/music-app/React-musicApp/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"E:/js/react/music-app/React-musicApp/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import SideBar from'./Component/SideBar';import Bottom from'./Component/Bottom';import Header from'./Component/Header';import Main from'./Component/Main';import Login from'./Component/Login';import SongListPage from'./Component/Main/SongListPage';import'./App.css';import{Route,Switch,Redirect}from'react-router-dom';import PlayListBoard from'./Component/PlayListBoard';import SearchResPage from'./Component/Main/SearchResPage';import{withRouter}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isPlayListShowing:false,// 显示播放列表\nsongListCurIdx:1,// 播放到了歌单的哪一首\nmode:0,// 播放模式，0：列表循环 1：单曲循环 2：随机循环 3：顺序循环\nsongSrc:'',login:false};_this.data={selectedList:0,list:[{listName:\"我喜欢的音乐\",path:'/0001',id:'0001'},{listName:\"夜凉不寐，月色如水\",path:'/0002',id:'0002'// info: {\n//   name: \"未命名\",\n//   intro: \"简介\",\n//   imgSrc:\n//     \"https://img0.baidu.com/it/u=2928837390,1445198898&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500\"\n// },\n}],playList:{songs:[{id:1,name:\"Crying\",singer:\"Still Corners\",album:\"Crying\",time:208,like:false,imageSrc:\"https://img0.baidu.com/it/u=2928837390,1445198898&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500\"},{id:2,name:\"Sea, Swallow Me\",singer:\"Cocteau Twins / Harold Budd\",album:\"The Moon and the Melodies\",time:189,imageSrc:\"https://y.qq.com/music/photo_new/T002R300x300M000001mZMtj15CO0z_2.jpg?max_age=2592000\",like:true},{id:3,name:\"The Ghost Has No Home\",singer:\"Cocteau Twins / Harold Budd\",album:\"The Moon and the Melodies\",time:455,imageSrc:\"https://y.qq.com/music/photo_new/T002R300x300M000001mZMtj15CO0z_2.jpg?max_age=2592000\",like:true},{id:4,name:\"堕落\",singer:\"王菲\",album:\"浮躁\",time:222,imageSrc:\"https://y.qq.com/music/photo_new/T002R300x300M0000002oEts1trJQd_4.jpg?max_age=2592000\",like:false}]}};_this.showPlayList=function(){var isPlayListShowing=_this.state.isPlayListShowing;_this.setState({isPlayListShowing:!isPlayListShowing});};_this.changeSong=function(num){var index=_this.state.songListCurIdx;var listLength=_this.data.playList.songs.length;if(_this.state.mode===2){num=Math.floor(Math.random()*(listLength-2)+1);}var newIdx=(index+num)%listLength;console.log(index,newIdx);_this.setState({songListCurIdx:newIdx});};_this.changeMode=function(event){var mode=_this.state.mode;_this.setState({mode:(mode+1)%4});event.preventDefault();event.stopPropagation();};_this.handleClick=function(event){var target=event.target.closest('.PlayListBoard');if(target||!_this.state.isPlayListShowing)return;_this.setState({isPlayListShowing:false});};_this.getSong=function(event){var musicFile=event.target.files[0];var url=URL.createObjectURL(musicFile);_this.setState({songSrc:url});};return _this;}_createClass(App,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",onClick:this.handleClick,children:[/*#__PURE__*/_jsx(Header,{login:this.state.login}),/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(SideBar,{list:this.data.list}),/*#__PURE__*/_jsx(Main,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/songlist/:listid\",component:SongListPage}),/*#__PURE__*/_jsx(Route,{path:\"/s\",component:SearchResPage}),/*#__PURE__*/_jsx(Redirect,{to:\"/songlist/0001\"})]})}),this.state.isPlayListShowing&&/*#__PURE__*/_jsx(PlayListBoard,{list:this.data.playList})]}),/*#__PURE__*/_jsx(Bottom,{song:this.data.playList.songs[this.state.songListCurIdx],showPlayList:this.showPlayList,changeSong:this.changeSong,changeMode:this.changeMode,mode:this.state.mode,songSrc:this.state.songSrc})]});}}]);return App;}(Component);export{App as default};","map":{"version":3,"sources":["E:/js/react/music-app/React-musicApp/src/App.js"],"names":["React","Component","SideBar","Bottom","Header","Main","Login","SongListPage","Route","Switch","Redirect","PlayListBoard","SearchResPage","withRouter","App","state","isPlayListShowing","songListCurIdx","mode","songSrc","login","data","selectedList","list","listName","path","id","playList","songs","name","singer","album","time","like","imageSrc","showPlayList","setState","changeSong","num","index","listLength","length","Math","floor","random","newIdx","console","log","changeMode","event","preventDefault","stopPropagation","handleClick","target","closest","getSong","musicFile","files","url","URL","createObjectURL"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport SideBar from './Component/SideBar';\nimport Bottom from './Component/Bottom';\nimport Header from './Component/Header';\nimport Main from './Component/Main';\nimport Login from './Component/Login';\nimport SongListPage from './Component/Main/SongListPage';\nimport './App.css'\nimport {Route, Switch, Redirect } from 'react-router-dom';\nimport PlayListBoard from './Component/PlayListBoard';\nimport SearchResPage from './Component/Main/SearchResPage';\nimport { withRouter } from 'react-router-dom';\n\n\nexport default class App extends Component {\n  state = {\n    isPlayListShowing: false,  // 显示播放列表\n    songListCurIdx: 1,         // 播放到了歌单的哪一首\n    mode: 0,                   // 播放模式，0：列表循环 1：单曲循环 2：随机循环 3：顺序循环\n    songSrc:'',\n    login:false,\n  }\n  data = {\n    selectedList: 0,\n\n    list: [{\n      listName: \"我喜欢的音乐\",\n      path: '/0001',\n      id: '0001',\n    }, {\n      listName: \"夜凉不寐，月色如水\",\n      path: '/0002',\n      id: '0002',\n      // info: {\n      //   name: \"未命名\",\n      //   intro: \"简介\",\n      //   imgSrc:\n      //     \"https://img0.baidu.com/it/u=2928837390,1445198898&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500\"\n      // },\n    }],\n    playList: {\n\n      songs: [\n        {\n          id: 1,\n          name: \"Crying\",\n          singer: \"Still Corners\",\n          album: \"Crying\",\n          time: 208,\n          like: false,\n          imageSrc:\"https://img0.baidu.com/it/u=2928837390,1445198898&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500\"\n        },\n        {\n          id: 2,\n          name: \"Sea, Swallow Me\",\n          singer: \"Cocteau Twins / Harold Budd\",\n          album: \"The Moon and the Melodies\",\n          time: 189,\n          imageSrc: \"https://y.qq.com/music/photo_new/T002R300x300M000001mZMtj15CO0z_2.jpg?max_age=2592000\",\n          like: true,\n        },\n        {\n          id: 3,\n          name: \"The Ghost Has No Home\",\n          singer: \"Cocteau Twins / Harold Budd\",\n          album: \"The Moon and the Melodies\",\n          time: 455,\n          imageSrc: \"https://y.qq.com/music/photo_new/T002R300x300M000001mZMtj15CO0z_2.jpg?max_age=2592000\",\n          like: true,\n        },\n        {\n          id: 4,\n          name: \"堕落\",\n          singer: \"王菲\",\n          album: \"浮躁\",\n          time: 222,\n          imageSrc: \"https://y.qq.com/music/photo_new/T002R300x300M0000002oEts1trJQd_4.jpg?max_age=2592000\",\n          like: false,\n        }\n      ]\n\n    },\n  };\n  showPlayList = () => {\n    const { isPlayListShowing } = this.state;\n    this.setState({\n      isPlayListShowing: !isPlayListShowing,\n    });\n  }\n  changeSong = (num) => {\n    const index = this.state.songListCurIdx;\n    const listLength = this.data.playList.songs.length;\n  \n    if(this.state.mode === 2){\n      num = Math.floor(Math.random() * (listLength - 2) + 1);\n    }\n    let newIdx = (index + num) % listLength;\n    console.log(index,newIdx)\n    this.setState({\n      songListCurIdx:newIdx,\n    })\n  }\n  changeMode = (event) => {\n    const { mode } = this.state;\n    this.setState({\n      mode: (mode + 1) % 4,\n    })\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  handleClick = (event) => {\n    const target = event.target.closest('.PlayListBoard');\n    if (target || !this.state.isPlayListShowing) return;\n    this.setState({\n      isPlayListShowing: false,\n    });\n  }\n  getSong = (event) => {\n    const musicFile = event.target.files[0];\n    let url = URL.createObjectURL(musicFile);\n    this.setState({\n      songSrc:url,\n    })\n  }\n  render() {\n    return (\n      <div className=\"App\" onClick={this.handleClick}>\n        {/* <audio src='..\\..\\resource\\Sea, Swallow Me.mp3' type=\"audio/mp3\" controls=\"controls\"></audio> */}\n        <Header login={this.state.login}/>\n        <div className=\"main\">\n          <SideBar list={this.data.list} />\n          <Main>\n            <Switch>\n              <Route path={`/songlist/:listid`} component={SongListPage} ></Route>\n              <Route path={`/s`} component={SearchResPage}></Route>\n              <Redirect to='/songlist/0001'></Redirect>\n            </Switch>\n          </Main>\n          {this.state.isPlayListShowing && <PlayListBoard list={this.data.playList} />}\n        </div>\n        <Bottom\n          song={this.data.playList.songs[this.state.songListCurIdx]}\n          showPlayList={this.showPlayList}\n          changeSong={this.changeSong}\n          changeMode={this.changeMode}\n          mode={this.state.mode}\n          songSrc={this.state.songSrc}\n        />\n\n        {/* <Login></Login> */}\n      </div>\n    );\n  }\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}