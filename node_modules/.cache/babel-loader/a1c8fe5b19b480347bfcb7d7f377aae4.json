{"ast":null,"code":"var _jsxFileName = \"E:\\\\js\\\\react\\\\music-app\\\\React-musicApp\\\\src\\\\Component\\\\Main\\\\VideoPage\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport FullScreenIcon from '../../../Icons/FullScreenIcon';\nimport PauseIcon from '../../../Icons/PauseIcon';\nimport PlayIcon from '../../../Icons/PlayIcon';\nimport SoundIcon from '../../../Icons/SoundIcon';\nimport Progress from '../../Bottom/Progress';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction VideoPage(props) {\n  _s();\n\n  var _props$video;\n\n  const video = /*#__PURE__*/React.createRef();\n  const [state, setState] = React.useState({\n    curTime: 0,\n    pause: false,\n    isHandling: false\n  });\n\n  function handlePause() {\n    const {\n      pause\n    } = state;\n    if (pause) video.current.play();else video.current.pause();\n    setState(state => ({\n      pause: !state.pause\n    }), () => {\n      console.log('#', state.pause);\n    });\n  } // 监听播放器进度变化\n\n\n  function handleTimeUpdate(event) {\n    // cur 传给子组件使用\n    const cur = Math.floor(event.target.currentTime); // const { isHandling } = state;\n    // if (isHandling) return;\n\n    setState({\n      curTime: cur\n    }); // 如果正在调整播放进度，则不改变进度条的长度\n\n    const width = Math.floor(cur / event.target.dun * 350) || 0; // 修改 css 变量 感觉会影响性能\n\n    document.documentElement.style.setProperty('--video-progress-bar-width', width + 'px');\n  } // 用户改变 audio 播放进度\n\n\n  function handleProgressChange(newProgress) {\n    video.current.currentTime = newProgress;\n  }\n\n  function calcProgress(width) {\n    const newProgress = Math.floor(width || 0);\n    handleProgressChange(newProgress);\n  }\n\n  function handleMouseDown(event) {\n    // \n    if (state.isHandling) return; // 是否是点击事件\n\n    let isClick = true;\n    const {\n      time: totalTime\n    } = props;\n    const top = event.target.closest('.Progress-slider-top');\n    const bar = event.target.closest('.Progress-slider');\n    const barCoord = bar.getBoundingClientRect(); // 没有点 top，是点击事件\n\n    if (!top) {\n      const width = event.clientX - barCoord.left;\n      calcProgress(width);\n      return;\n    }\n\n    const topCoord = top.getBoundingClientRect();\n    setState({\n      isHandling: true\n    }); // 鼠标指针点击位置与 top 左上角的 offset\n\n    const start = {\n      x: event.clientX,\n      y: event.clientY\n    };\n    const offset = {\n      x: event.clientX - topCoord.left,\n      y: event.clientY - topCoord.top\n    };\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n\n    function handleMouseMove(event) {\n      if (isClick && Math.floor(Math.abs(event.clientX - start.x)) != 0) isClick = false; // 拖拽时只改变 css 变量的值\n\n      let width = event.clientX - barCoord.left;\n      width = width < 350 ? width : 350;\n      width = width > 0 ? width : 0;\n      setState({\n        curTime: Math.floor(width)\n      });\n      document.documentElement.style.setProperty('--progress-bar-width', width + 'px');\n    }\n\n    function handleMouseUp(event) {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      setState({\n        isHandling: false\n      });\n      const width = event.clientX - barCoord.left;\n      if (!isClick && !event.target.closest('.Progress-slider')) bar.classList.remove('Progress-slider-hover');\n      calcProgress(width);\n    }\n  }\n\n  let url = (_props$video = props.video) === null || _props$video === void 0 ? void 0 : _props$video.url;\n  let totalTime = props === null || props === void 0 ? void 0 : props.dun;\n  url = url ? url : '';\n  totalTime = totalTime ? totalTime / 1000 : 0;\n  const {\n    curTime,\n    isHandling,\n    pause\n  } = state;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"VideoPage\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-control\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"video-block\",\n        children: /*#__PURE__*/_jsxDEV(\"video\", {\n          onTimeUpdate: handleTimeUpdate,\n          height: \"100%\",\n          ref: video,\n          src: url,\n          autoPlay: true,\n          preload: \"auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-control-bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-progress\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-progress-bar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-progress-top\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"video-pause\",\n            onClick: handlePause,\n            children: [pause ? /*#__PURE__*/_jsxDEV(PlayIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 26\n            }, this) : /*#__PURE__*/_jsxDEV(PauseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [(\"0\" + Math.floor(curTime / 60)).slice(-2), \":\", (\"0\" + curTime % 60).slice(-2), \" / \", (\"0\" + Math.floor(totalTime / 60)).slice(-2), \":\", (\"0\" + totalTime % 60).slice(-2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"video-func\",\n            children: [/*#__PURE__*/_jsxDEV(SoundIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 42\n            }, this), /*#__PURE__*/_jsxDEV(FullScreenIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 55\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 7\n  }, this);\n}\n\n_s(VideoPage, \"DMNuJJnTDuAJfyjSnF3O0+T8rW8=\");\n\n_c = VideoPage;\nexport default connect(state => ({\n  video: state.video,\n  dun: state.dun\n}), {})(VideoPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"VideoPage\");","map":{"version":3,"sources":["E:/js/react/music-app/React-musicApp/src/Component/Main/VideoPage/index.jsx"],"names":["React","Component","connect","FullScreenIcon","PauseIcon","PlayIcon","SoundIcon","Progress","VideoPage","props","video","createRef","state","setState","useState","curTime","pause","isHandling","handlePause","current","play","console","log","handleTimeUpdate","event","cur","Math","floor","target","currentTime","width","dun","document","documentElement","style","setProperty","handleProgressChange","newProgress","calcProgress","handleMouseDown","isClick","time","totalTime","top","closest","bar","barCoord","getBoundingClientRect","clientX","left","topCoord","start","x","y","clientY","offset","addEventListener","handleMouseMove","handleMouseUp","abs","removeEventListener","classList","remove","url","slice"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport FullScreenIcon from '../../../Icons/FullScreenIcon';\r\nimport PauseIcon from '../../../Icons/PauseIcon';\r\nimport PlayIcon from '../../../Icons/PlayIcon';\r\nimport SoundIcon from '../../../Icons/SoundIcon';\r\nimport Progress from '../../Bottom/Progress';\r\nimport './index.css';\r\n\r\nfunction VideoPage(props){\r\n  const video = React.createRef();\r\n  const [state, setState] = React.useState({\r\n    curTime: 0,\r\n    pause: false,\r\n    isHandling: false,\r\n  })\r\n\r\n  function handlePause() {\r\n    const { pause } = state\r\n    if (pause) video.current.play();\r\n    else video.current.pause();\r\n    setState(state => ({\r\n      pause: !state.pause,\r\n    }), () => {\r\n      console.log('#', state.pause);\r\n    })\r\n  }\r\n  // 监听播放器进度变化\r\n  function handleTimeUpdate(event){\r\n    // cur 传给子组件使用\r\n    const cur = Math.floor(event.target.currentTime);\r\n    // const { isHandling } = state;\r\n    // if (isHandling) return;\r\n    setState({\r\n      curTime: cur,\r\n    })\r\n    // 如果正在调整播放进度，则不改变进度条的长度\r\n    const width = Math.floor(cur / event.target.dun * 350) || 0;\r\n    // 修改 css 变量 感觉会影响性能\r\n    document.documentElement.style.setProperty('--video-progress-bar-width', width + 'px');\r\n  }\r\n  // 用户改变 audio 播放进度\r\n  function handleProgressChange(newProgress){\r\n    video.current.currentTime = newProgress;\r\n  }\r\n\r\n  function calcProgress(width){\r\n    const newProgress = Math.floor((width || 0));\r\n    handleProgressChange(newProgress);\r\n  }\r\n\r\n  function handleMouseDown(event){\r\n    // \r\n    if (state.isHandling) return;\r\n\r\n    // 是否是点击事件\r\n    let isClick = true;\r\n\r\n    const { time: totalTime } = props;\r\n    const top = event.target.closest('.Progress-slider-top');\r\n    const bar = event.target.closest('.Progress-slider');\r\n    const barCoord = bar.getBoundingClientRect();\r\n    // 没有点 top，是点击事件\r\n    if (!top) {\r\n      const width = event.clientX - barCoord.left;\r\n      calcProgress(width);\r\n      return;\r\n    }\r\n\r\n    const topCoord = top.getBoundingClientRect();\r\n    setState({\r\n      isHandling: true,\r\n    })\r\n\r\n    // 鼠标指针点击位置与 top 左上角的 offset\r\n    const start = {\r\n      x: event.clientX,\r\n      y: event.clientY\r\n    }\r\n    const offset = {\r\n      x: event.clientX - topCoord.left,\r\n      y: event.clientY - topCoord.top,\r\n    }\r\n\r\n    document.addEventListener('mousemove', handleMouseMove);\r\n    document.addEventListener('mouseup', handleMouseUp);\r\n\r\n    function handleMouseMove(event) {\r\n      if (isClick && Math.floor(Math.abs(event.clientX - start.x)) != 0) isClick = false;\r\n\r\n      // 拖拽时只改变 css 变量的值\r\n      let width = event.clientX - barCoord.left;\r\n      width = width < 350 ? width : 350;\r\n      width = width > 0 ? width : 0;\r\n\r\n      setState({\r\n        curTime: Math.floor(width),\r\n      })\r\n      document.documentElement.style.setProperty('--progress-bar-width', width + 'px');\r\n    }\r\n\r\n    function handleMouseUp(event) {\r\n      document.removeEventListener('mousemove', handleMouseMove);\r\n      document.removeEventListener('mouseup', handleMouseUp);\r\n\r\n      setState({\r\n        isHandling: false,\r\n      })\r\n      const width = event.clientX - barCoord.left;\r\n\r\n      if (!isClick && !event.target.closest('.Progress-slider')) bar.classList.remove('Progress-slider-hover');\r\n      calcProgress(width);\r\n    }\r\n  }\r\n    let url = props.video?.url;\r\n    let totalTime = props?.dun;\r\n    url = url ? url : '';\r\n    totalTime = totalTime ? totalTime/1000 : 0;\r\n    const { curTime, isHandling, pause } = state;\r\n    return (\r\n      <div className='VideoPage'>\r\n        <div className='video-control'>\r\n          <div class=\"video-block\">\r\n            <video\r\n              onTimeUpdate={handleTimeUpdate}\r\n              height='100%'\r\n              ref={video}\r\n              src={url}\r\n              autoPlay\r\n              preload='auto'></video>\r\n          </div>\r\n          <div className='video-control-bar'>\r\n            <div className='video-progress'>\r\n              <div className='video-progress-bar'></div>\r\n              <div className='video-progress-top'></div>\r\n            </div>\r\n            <ul>\r\n              <li className='video-pause' onClick={handlePause}>\r\n                {pause ? <PlayIcon /> : <PauseIcon />}\r\n                <span>{(\"0\" + Math.floor(curTime / 60)).slice(-2)}:\r\n          {(\"0\" + (curTime % 60)).slice(-2)} / {(\"0\" + Math.floor(totalTime / 60)).slice(-2)}:\r\n          {(\"0\" + (totalTime % 60)).slice(-2)}</span>\r\n              </li>\r\n              <li className='video-func'><SoundIcon /><FullScreenIcon /></li>\r\n            </ul>\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n    )\r\n}\r\n\r\nexport default connect(\r\n  state => ({ \r\n    video: state.video,\r\n    dun:state.dun,  \r\n  }),\r\n  {}\r\n)(VideoPage)"]},"metadata":{},"sourceType":"module"}