{"ast":null,"code":"import _asyncToGenerator from\"E:/js/react/music-app/React-musicApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"E:\\\\js\\\\react\\\\music-app\\\\React-musicApp\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";// action 为一个 对象 → 同步action\n// action 为一个函数 → 异步action\n// 因为函数里面能开启异步任务\nimport axios from\"axios\";import store from\"./store\";// 1: 单曲, 10: 专辑, 100: 歌手, 1000: 歌单, 1002: 用户, 1004: MV, 1006: 歌词, 1009: 电台, 1014: 视频,\nvar TYPE={'songs':1,'artists':100,'albums':10,'videos':1014,'songlists':1000,'lyrics':10,'users':1002};// export const createSearchAction = (type, data) => ({type,data});\n// 异步任务会被传入一个 dispatch 参数供使用\nexport var createSearchAction=function createSearchAction(type,data){console.log('dispatch reach',type,data);return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('await');_context.next=3;return axios(\"http://localhost:4000/search?keywords=\".concat(data,\"&&type=\").concat(TYPE[type]));case 3:res=_context.sent;console.log('await done',res);dispatch({type:'updateData',data:{type:type,data:res.data.result}});case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var addNewSongAction=function addNewSongAction(data){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var song;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios(\"http://localhost:4000/song/detail?ids=\".concat(data));case 2:song=_context2.sent;dispatch({type:'addSong',data:song.data.songs[0]});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var getMvAction=function getMvAction(id){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var mv;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios(\"http://localhost:4000/mv/url?id=\".concat(id));case 2:mv=_context3.sent;dispatch({type:'openMvPage',data:mv});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"sources":["E:/js/react/music-app/React-musicApp/src/Redux/actions.js"],"names":["axios","store","TYPE","createSearchAction","type","data","console","log","dispatch","res","result","addNewSongAction","song","songs","getMvAction","id","mv"],"mappings":"gQAAA;AACA;AACA;AAEA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA;AACA,GAAMC,CAAAA,IAAI,CAAG,CACX,QAAQ,CADG,CAEX,UAAU,GAFC,CAGX,SAAS,EAHE,CAIX,SAAS,IAJE,CAKX,YAAY,IALD,CAMX,SAAS,EANE,CAOX,QAAQ,IAPG,CAAb,CASA;AACA;AACA,MAAO,IAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,IAAD,CAAOC,IAAP,CAAgB,CAChDC,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8BH,IAA9B,CAAoCC,IAApC,EACA,+FAAO,iBAAOG,QAAP,0HACLF,OAAO,CAACC,GAAR,CAAY,OAAZ,EADK,sBAEWP,CAAAA,KAAK,iDAA0CK,IAA1C,mBAAwDH,IAAI,CAACE,IAAD,CAA5D,EAFhB,QAEDK,GAFC,eAGLH,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BE,GAA1B,EAEAD,QAAQ,CAAC,CACPJ,IAAI,CAAE,YADC,CAEPC,IAAI,CAAE,CACJD,IAAI,CAAEA,IADF,CAEJC,IAAI,CAAEI,GAAG,CAACJ,IAAJ,CAASK,MAFX,CAFC,CAAD,CAAR,CALK,sDAAP,+DAcD,CAhBM,CAkBP,MAAO,IAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACN,IAAD,CAAU,CACxC,gGAAO,kBAAOG,QAAP,sJACYR,CAAAA,KAAK,iDAA0CK,IAA1C,EADjB,QACDO,IADC,gBAELJ,QAAQ,CAAC,CAACJ,IAAI,CAAC,SAAN,CAAiBC,IAAI,CAACO,IAAI,CAACP,IAAL,CAAUQ,KAAV,CAAgB,CAAhB,CAAtB,CAAD,CAAR,CAFK,wDAAP,iEAID,CALM,CAOP,MAAO,IAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,EAAD,CAAO,CAChC,gGAAO,kBAAOP,QAAP,oJACUR,CAAAA,KAAK,2CAAoCe,EAApC,EADf,QACDC,EADC,gBAELR,QAAQ,CAAC,CAACJ,IAAI,CAAC,YAAN,CAAoBC,IAAI,CAACW,EAAzB,CAAD,CAAR,CAFK,wDAAP,iEAID,CALM","sourcesContent":["// action 为一个 对象 → 同步action\r\n// action 为一个函数 → 异步action\r\n// 因为函数里面能开启异步任务\r\n\r\nimport axios from \"axios\"\r\nimport store from \"./store\";\r\n// 1: 单曲, 10: 专辑, 100: 歌手, 1000: 歌单, 1002: 用户, 1004: MV, 1006: 歌词, 1009: 电台, 1014: 视频,\r\nconst TYPE = {\r\n  'songs':1,\r\n  'artists':100,\r\n  'albums':10,\r\n  'videos':1014,\r\n  'songlists':1000,\r\n  'lyrics':10,\r\n  'users':1002,\r\n}\r\n// export const createSearchAction = (type, data) => ({type,data});\r\n// 异步任务会被传入一个 dispatch 参数供使用\r\nexport const createSearchAction = (type, data) => {\r\n  console.log('dispatch reach', type, data)\r\n  return async (dispatch) => {\r\n    console.log('await')\r\n    let res = await axios(`http://localhost:4000/search?keywords=${data}&&type=${TYPE[type]}`);\r\n    console.log('await done', res)\r\n    \r\n    dispatch({\r\n      type: 'updateData',\r\n      data: {\r\n        type: type,\r\n        data: res.data.result\r\n      }\r\n    })\r\n      \r\n  }\r\n}\r\n\r\nexport const addNewSongAction = (data) => {\r\n  return async (dispatch) => {\r\n    let song = await axios(`http://localhost:4000/song/detail?ids=${data}`);\r\n    dispatch({type:'addSong', data:song.data.songs[0]})\r\n  }\r\n}\r\n\r\nexport const getMvAction = (id) =>{\r\n  return async (dispatch) => {\r\n    let mv = await axios(`http://localhost:4000/mv/url?id=${id}`)\r\n    dispatch({type:'openMvPage', data:mv})\r\n  }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}